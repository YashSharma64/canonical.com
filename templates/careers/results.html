{% extends '/careers/base.html' %}

{% block title %}Jobs{% endblock %}

{% block meta_description %}Canonical offers a truly distributed workplace for exceptional colleagues who are
self-motivated, organised. Maintain a home office and experience the top of global technology strategy and engineering.
Travel regularly to interesting destinations for team, conference and customer engagements.{% endblock %}

{% block hero %}
<section class="p-strip--suru-light-grey">
  <div class="row">
    <div class="col-6">
      <h1 class="u-no-margin--bottom">Careers</h1>
    </div>
  </div>
</section>
{% endblock %}

{% block careers_content %}
  <div class="row">
    <h2 class="p-muted-heading">Top roles for you</h2>
  </div>
  <div class="row u-sv3">
    {% for vacancy in vacancies %}
      {% if loop.index < 5 %}
        {% if loop.index == 3 %}
        <div class="row">
          {% endif %}
          <div class="p-card--highlighted col-4"
            data-office="{{ vacancy.office }}"
            data-employment="{{ vacancy.employment }}"
            data-date="{{ vacancy.date }}"
            data-location="{{ vacancy.location }}"
            data-management="{{ vacancy.management}}"
            data-sector="{{ vacancy.departments | map(attribute='name') | join(', ') }}"
          >
          <h3 class="p-card__title u-no-padding--top">
            <a class="p-link--soft" href="/careers/{{ vacancy.id }}/{{ vacancy.slug }}">{{ vacancy.title }}&nbsp;&rsaquo;</a>
          </h3>
          {% if vacancy.description %}
          <p clss="p-cart__content">{{ vacancy.description }}</p>
          {% endif %}
          <p class="u-no-margin--bottom">
            <small {% if checkbox %}style="padding-left: 2rem;"{% endif %}>
              {{ vacancy.location }}
            </small>
          </p>
        </div>
        {% if loop.index == 2 %}
        </div>
        {% endif %}
      {% endif %}
    {% endfor %}
    <div class="col-8">
      <div class="row">
        <div class="col-8">
          {% if not vacancies %}
            <div class="u-align--center">
              <p>
                There are no roles matching your selection.
                <a href="/careers/start">Retake choices again?</a>
              </p>
            </div>
          {% else %}
            <div class="js-filter-jobs-container"><h2>
              More matches for you to consider
            </h2>
            {% for department in vacancies_by_department.values() %}
              <div class="u-sv3">
                <h3>
                  <a class="p-link--soft" href="/careers/{{ department.slug }}">
                    {{ department.name }}
                  </a>
                </h3>
                <ul class="p-list is-split u-no-margin--bottom">
                  {% for vacancy in department.vacancies %}
                    {% if loop.index < 10 %}
                      <li
                        class="p-list u-sv1"
                        data-office="{{ vacancy.office }}"
                        data-employment="{{ vacancy.employment }}"
                        data-date="{{ vacancy.date }}"
                        data-location="{{ vacancy.location }}"
                        data-management="{{ vacancy.management}}"
                        data-sector="{{ department.slug }}"
                      >
                        <a href="/careers/{{ vacancy.id }}/{{ vacancy.slug }}">
                          {{ vacancy.title }}
                        </a>
                      </li>
                    {% endif %}
                  {% endfor %}
                </ul>        
                <p>
                  <a href="/careers/{{ department.slug }}">
                    See all roles in {{ department.name }}&nbsp;&rsaquo;
                  </a>
                </p>
                <hr />
              </div>
            {% endfor %}          
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
